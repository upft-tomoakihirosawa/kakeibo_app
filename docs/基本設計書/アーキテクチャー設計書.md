# アプリアーキテクチャ設計ドキュメント

---

## 概要

家計簿アプリにおけるAndroid、iOS、Webフロントエンドの共通アーキテクチャ設計の目的は、ユーザーが簡単に収支を管理できるシステムを提供することです。これにより、ユーザー体験の向上、開発効率の改善、および将来的な機能追加を容易にすることを目指します。

---

## 採用アーキテクチャ

### 基本設計思想

- 採用するアーキテクチャ思想：MVVM（Model-View-ViewModel）
- アーキテクチャ選定の理由：MVVMはデータバインディングを活用し、UIとビジネスロジックの分離を実現し、開発の保守性と拡張性を向上させるため。

### アーキテクチャレイヤ構成

#### 1. Presentationレイヤ

- UI担当の技術スタック：React（Webフロント）／Flutter（モバイル）
- 役割：ユーザーとのインターフェースを提供し、ユーザーからの入力を受け取り、ViewModelやControllerと連携します。

#### 2. ViewModelレイヤ

- UIとドメイン層の間を取り持つ方法：コンポーネント間のデータの受け渡しを効率化するため、状態管理ライブラリを使用。
- 使用する状態管理ライブラリ：Redux（Web）／Riverpod（Flutter）

#### 3. Domainレイヤ

- ドメインロジックの定義方法：ユーザーの収支に関連するユースケースを定義し、ビジネスロジックを集中管理します。

#### 4. Dataレイヤ

- データ取得・永続化に関する技術：Firebase FirestoreまたはNode.js + MongoDBを使用。
- 抽象化方法：Repositoryパターンを採用し、データの取得や保存を抽象化します。

### 技術スタック

| プラットフォーム | UIフレームワーク        | 状態管理              | ネットワーク       | データベース     |
| ---------------- | ----------------------- | --------------------- | ------------------ | ---------------- |
| Android          | Flutter                 | Riverpod              | Dio                | Firebase Firestore|
| iOS              | Flutter                 | Riverpod              | Dio                | Firebase Firestore|
| Webフロント      | React                   | Redux                 | Axios              | MongoDB          |

---

## データフロー

データフローは以下の通りです：

1. ユーザーがUIを介して収支情報を入力。
2. プレゼンテーションレイヤがViewModelにデータを送信。
3. ViewModelがドメインレイヤのユースケースを呼び出し、業務ロジックを処理。
4. データの取得や保存がDataレイヤを介して行われる。
5. 変更がある場合、ViewModelがプレゼンテーションレイヤに通知し、UIの再描画を行う。

---

## 非機能要件

- 保守性・拡張性：モジュール化したアーキテクチャにより、新機能の追加やバグ修正が容易。
- パフォーマンス：ユーザーインタラクションをスムーズに保持するため、非同期操作を活用。
- セキュリティ：データの暗号化や認証機能を実装し、ユーザー情報の保護を確実にする。

---

## 設計のポイント

- コンポーネント間の依存性を最小限に抑えることで、ユニットテストや検証の効率を向上。
- 非同期処理を適切に実装し、レスポンシブなUIを実現。
- 状態管理の一貫性を保ち、データの流れを明確に管理する。

---

## 留意事項

- ドキュメントの更新は開発フェーズごとに行い、進捗を定期的に反映させる。
- レビューは定期的に行い、重要な変更についてはチーム全体で共有する。
-技術スタックの変更や調整が必要な場合は、チーム内での合意形成を重視する。